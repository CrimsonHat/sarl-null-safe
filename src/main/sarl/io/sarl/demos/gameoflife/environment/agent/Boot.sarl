/** 
 * 
 */
package io.sarl.demos.gameoflife.environment.^agent

import io.sarl.core.DefaultContextInteractions
import io.sarl.core.Initialize
import io.sarl.demos.gameoflife.environment.^agent.events.RegisterEnvironmentListener
import io.sarl.demos.gameoflife.gui.GUI
import io.sarl.lang.core.Address
import io.sarl.util.Scopes

/** 
 * @author Maxime PINARD
 * 
 */
agent Boot {
	uses DefaultContextInteractions;
	
	on Initialize{
		
		val gui = GUI.getGUI();
		val environmentUUID = spawn(Environment, 100, 100);
		val controller = new Controller(defaultSpace, new Address(defaultSpace.spaceID, getID()),
			environmentUUID);
		
		gui.addGUIListener(controller);
		val address = new Address(defaultSpace.spaceID, environmentUUID);
		emit(new RegisterEnvironmentListener(gui), Scopes::addresses(address));
	}
}
